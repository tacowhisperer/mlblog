<!DOCTYPE html>
<html>
<head>
	<!-- Look at how quirky this page title is, hire me to do your promotions, please. -->
	<title>Mexico Lindo bLoG</title>

	<!-- Mobile "support" -->
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">

	<!-- Chrome tab color -->
	<meta name="theme-color" content="#000000">
	
	<style>
		* {
			background: black;
			color: #bbb;
			font-family: monospace;
			overflow-wrap: break-word;
		}
	</style>

	<!-- I guess it would be nice for everything to fucking work lol. -->
	<script type="text/javascript">
		function fetchJSON(path, callback) {
			const httpRequest = new XMLHttpRequest();

			httpRequest.onreadystatechange = function() {
				if (httpRequest.readyState === 4 && httpRequest.status === 200)
					callback(JSON.parse(httpRequest.responseText));
			};

			httpRequest.open('GET', path);
			httpRequest.send();
		}

		window.addEventListener('load', e => {
			fetchJSON('./www/mlblogObject.json', function(data) {
				const blogContent = data.blogContent;
				const usr = data.usernameContent;
				console.log(JSON.stringify(usr, null, 4));

				// Go through each blog entry and lazily add it to the main page until a proper view is implemented.
				for (let i = 0; i < blogContent.length; i++) {
					const entryTitle = document.createElement('h1');
					entryTitle.appendChild(document.createTextNode(blogContent[i].title));

					// Add the blog entry to the main body for now.
					document.body.appendChild(entryTitle);

					const entryMeta = document.createElement('h3');
					const entryMetaTxt = `${blogContent[i].date} by ${usr[blogContent[i].username].display}`;
					entryMeta.appendChild(document.createTextNode(entryMetaTxt));

					// Add the date to the main body for now.
					document.body.appendChild(entryMeta);

					const content = blogContent[i].content.split('\n');
					for (let j = 0; j < content.length; j++) {
						const entryContentParagraph = document.createElement('p');
						entryContentParagraph.appendChild(document.createTextNode(content[j]));

						// Add the blog content to the main body for now.
						document.body.appendChild(entryContentParagraph);
					}
				}
			})
		});
	</script>
</head>

<body>
</body>
</html>
